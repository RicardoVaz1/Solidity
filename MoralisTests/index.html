<html>
    <head>
        <title>Moralis Tests</title>
        <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
        <script src="https://npmcdn.com/moralis@0.0.6/dist/moralis.js"></script>
        <!-- <script src="./main.js"></script> -->
    </head>
    <body>
        Check the Console tab!
        <script>
            Moralis.initialize('UZSqeVQoEaE8T6ZJ2XKCdOcaVAPtDqpmLT39szsD'); // Application id from moralis
            Moralis.serverURL = 'https://pvvnotm4bih1.usemoralis.com:2053/server'; //Server url from moralis
            
            async function getInfByID(query_id) {
                try {
                    const inf = await Moralis.Cloud.run("cryptopunks?id="+query_id)
                    console.log("Inf: ", inf)
                    console.log("Date: " + inf[0].attributes.block_timestamp)
                }
                catch(error) {
                    console.log("Error: ", error)
                }
            }

            async function getInfByDate(query_date) {
                try {                    
                    var dateISO = new Date(query_date).toISOString()
                    console.log("date: ", dateISO)

                    const inf = await Moralis.Cloud.run("transaction-by-date?date="+dateISO)
                    console.log("Info: ", inf)
                    console.log("Date: " + inf[0].attributes.block_timestamp)
                }
                catch(error) {
                    console.log("Error: ", error)
                }
            }

            async function getTransactionsByDate(query_date) {
                try {                    
                    var dateISO = new Date(query_date).toISOString()
                    console.log("date: ", dateISO)

                    const inf = await Moralis.Cloud.run("transactions-by-date?date="+dateISO)
                    console.log("Information: ", inf)
                }
                catch(error) {
                    console.log("Error: ", error)
                }
            }


            
            const id = "1id5SR1vqy68wzGHHb7oFYSe"
            // const date = "2022-04-11T11:15:20.000Z"
            // const date = "Mon Apr 11 2022 12:15:20 GMT+0100 (Western European Summer Time)"
            const date = "Apr 11 2022 12:15:20"

            getInfByID(id)
            getInfByDate(date)
            getTransactionsByDate(date)
        </script>
    </body>
</html>
